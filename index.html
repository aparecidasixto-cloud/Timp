<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sistema V6.0 (Pro)</title>
    <script src='https://meet.jit.si/external_api.js'></script>
    <style>
        body { margin: 0; padding: 0; background-color: #000; font-family: sans-serif; height: 100vh; overflow: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        /* Estilo da tela de login */
        .login-box { 
            background: #1a1a1a; padding: 25px; border-radius: 12px; 
            width: 85%; max-width: 350px; text-align: center; border: 1px solid #333; z-index: 100;
        }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 5px; border: none; background: #333; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #0070f3; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 10px; font-size: 16px; }
        
        /* Onde o vídeo vai aparecer */
        #video-frame { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: #000; display: none; z-index: 1;
        }
        
        .hidden { display: none !important; }
        p { color: #888; font-size: 12px; }
    </style>
</head>
<body>

    <div id="login-area" class="login-box">
        <h2 style="color:white; margin-top:0;">Acesso Seguro</h2>
        <input type="text" id="usuario" placeholder="Usuário">
        <input type="password" id="senha" placeholder="Senha">
        <button onclick="entrar()">ENTRAR</button>
        <p>Infraestrutura v6.0 (Anti-Bloqueio)</p>
    </div>

    <div id="video-frame"></div>

    <script>
        // Nome da sala secreta gerado pelo seu código
        const SALA_ID = "SALA_PRIVADA_093106Rm_X92_SISTEMA_UNICO"; 

        function entrar() {
            const u = document.getElementById('usuario').value.trim().toLowerCase();
            const s = document.getElementById('senha').value.trim();

            if (s !== "093106Rm") {
                alert("Senha incorreta!");
                return;
            }

            if (u.includes("trasmitir") || u.includes("transmitir")) {
                iniciarSistema(true); // É o Transmissor
            } else if (u === "receber") {
                iniciarSistema(false); // É o Receptor
            } else {
                alert("Usuário desconhecido.");
            }
        }

        function iniciarSistema(souTransmissor) {
            // Esconde login e mostra a tela de vídeo
            document.getElementById('login-area').classList.add('hidden');
            document.getElementById('video-frame').style.display = 'block';

            // Configurações para esconder que é uma reunião e parecer um sistema próprio
            const domain = 'meet.jit.si';
            const options = {
                roomName: SALA_ID,
                width: '100%',
                height: '100%',
                parentNode: document.querySelector('#video-frame'),
                lang: 'pt',
                configOverwrite: {
                    startWithAudioMuted: !souTransmissor, // Receptor começa mudo
                    startWithVideoMuted: !souTransmissor, // Receptor começa sem câmera
                    prejoinPageEnabled: false, // Entra direto sem perguntar
                    disableDeepLinking: true, // Não pede para instalar app
                },
                interfaceConfigOverwrite: {
                    // Remove botões para limpar a tela
                    TOOLBAR_BUTTONS: souTransmissor ? ['microphone', 'camera', 'hangup'] : ['hangup'], 
                    SHOW_JITSI_WATERMARK: false,
                    SHOW_WATERMARK_FOR_GUESTS: false,
                    DEFAULT_BACKGROUND: '#000000',
                    MOBILE_APP_PROMO: false
                },
                userInfo: {
                    displayName: souTransmissor ? "Transmissor (Você)" : "Espectador"
                }
            };

            const api = new JitsiMeetExternalAPI(domain, options);

            // Forçar configurações assim que entrar
            api.addEventListener('videoConferenceJoined', () => {
                if (!souTransmissor) {
                    // Se for receptor, garante que fica mudo e vê o transmissor grande
                    api.executeCommand('toggleTileView'); // Garante tela cheia
                }
            });
        }
    </script>
</body>
</html>
